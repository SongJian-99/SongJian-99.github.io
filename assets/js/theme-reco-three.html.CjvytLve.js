import{_ as i}from"./plugin-vue_export-helper.DlAUqK2U.js";import{c as e,a as s,o as a}from"./app.C4VKiIAB.js";const n={};function l(r,t){return a(),e("div",null,t[0]||(t[0]=[s(`<blockquote><p>本文主要介绍为 VuePress + GitHub Pages + GitHub Actions 搭建的网站添加自定义域名的详细步骤。</p><p>前提：站点已经使用 VuePress + GitHub Pages + GibHub Actions 搭建并正常运行。</p></blockquote><h2 id="域名" tabindex="-1"><a class="header-anchor" href="#域名"><span>域名</span></a></h2><h3 id="申请" tabindex="-1"><a class="header-anchor" href="#申请"><span>申请</span></a></h3><p>首先我们需要拥有一个域名，登录<a href="https://wanwang.aliyun.com/domain/" target="_blank" rel="noopener noreferrer">万网</a>选择域名后进行购买，填写相关信息，并等待审核。审核通过之后，在域名列表页（右上角控制台-&gt;控制台首页-&gt;域名-&gt;域名列表页）就可以看见已购买的域名了。</p><figure><img src="https://s2.loli.net/2023/06/17/BzKhbJSynRd32Ev.png" alt="image-20230617144639816.png" tabindex="0" loading="lazy"><figcaption>image-20230617144639816.png</figcaption></figure><figure><img src="https://s2.loli.net/2023/06/17/FZHrgbIC8wA4PqG.png" alt="image-20230617145052448.png" tabindex="0" loading="lazy"><figcaption>image-20230617145052448.png</figcaption></figure><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h3><p>域名首次申请成功后，需要为域名配置 DNS 解析信息，用来路由到 GitHub Pages 的服务器地址。</p><ol><li>在终端窗口执行如下命令，查看当前网站的域名（GitHub Pages 中的域名）对应的 IP 地址，并复制到剪贴板，用于下一步配置 DNS 解析记录使用。</li></ol><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> songjian-99.github.io</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>进入到域名解析页面（域名列表页-&gt;解析），为域名添加 DNS 解析记录。</li></ol><p>我们需要为域名配置两个 DNS 解析记录。配置信息如下表所示（注意替换相关信息）。配置完成后，需要等待几分钟来让 DNS 记录生效。域名 DNS 记录生效后，下一步需要将域名配置到 GitHub Pages 中。</p><table><thead><tr><th>记录类型</th><th>主机记录</th><th>解析请求来源</th><th>记录值</th><th>TTL</th></tr></thead><tbody><tr><td>CNAME</td><td>www</td><td>默认</td><td>网站域名（<a href="http://songjian-99.github.io" target="_blank" rel="noopener noreferrer">songjian-99.github.io</a>）</td><td>10分钟（默认）</td></tr><tr><td>A</td><td>@</td><td>默认</td><td>上一步获取的 IP 地址</td><td>10分钟（默认）</td></tr></tbody></table><figure><img src="https://s2.loli.net/2023/06/17/SdsHzFactYLOXpq.png" alt="image-20230617160144514.png" tabindex="0" loading="lazy"><figcaption>image-20230617160144514.png</figcaption></figure><h2 id="github-pages-设置" tabindex="-1"><a class="header-anchor" href="#github-pages-设置"><span>GitHub Pages 设置</span></a></h2><p>进入到 GitHub pages 页面（仓库-&gt; Settings -&gt; Pages），在 Custom domain 中填写域名并保存。等待 DNS 检查，检查通过后，即可通过新域名访问网站。</p><figure><img src="https://s2.loli.net/2023/06/17/Fka16xMycBwVieg.png" alt="image-20230617162910158.png" tabindex="0" loading="lazy"><figcaption>image-20230617162910158.png</figcaption></figure><h2 id="github-actions-配置" tabindex="-1"><a class="header-anchor" href="#github-actions-配置"><span>GitHub Actions 配置</span></a></h2><p>每次更新代码，通过 GitHub Actions 自动部署后，Pages 中到自定义域名会重置，因此需要同时修改 workflow 配置文件。</p><p>在 workflow 配置文件中，新增自定义域名配置。配置信息如下所示（仅贴出与 GitHub Pages 有关的代码，完整代码可以查看该文章：<a href="https://juejin.cn/post/7239536753971724344#heading-9" target="_blank" rel="noopener noreferrer">使用 VuePress + GitHub Pages + GitHub Actions 搭建个人博客</a>）</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 部署到 GitHub Pages</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      uses</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">crazy-max/ghaction-github-pages@v2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      env</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        GITHUB_TOKEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\${{ secrets.ACCESS_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      with</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        target-branch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gh-pages</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 部署到 gh-pages 分支，因为 main 分支存放的一般是源码，而 gh-pages 分支则用来存放生成的静态文件</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        build_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">docs/.vuepress/dist</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # vuepress 生成的静态文件存放的地方</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        fqdn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">cleaner.love</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 自定义域名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><ol><li><p>为什么需要添加两个 DNS 解析记录？</p><p>GitHub Pages 要求同时添加两个解析记录，确保自定义域名能够解析到 GitHub Pages 的服务器上，否则 DNS check 时会出错。</p><p>以域名 cleaner.love 为例，因为 cleaner.love（根域名） 和 www.cleaner.love（子域名）会被视为两个不同的域名，CNAME 记录用于将子域名指向 GitHub Pages 服务器，A 记录用于将根域名指向 GitHub Pages 的服务器。</p></li></ol><table><thead><tr><th>记录类型</th><th>含义</th></tr></thead><tbody><tr><td>A 记录</td><td>将域名指向一个 IPV4 地址（映射 Web 服务器地址）</td></tr><tr><td>CNAME 记录</td><td>将域名指向另外一个域名（CDN）</td></tr><tr><td>AAAA 记录</td><td>将域名指向一个 IPV6 地址（类似于 A 记录）</td></tr><tr><td>NS 记录</td><td>将子域名指定其他 DNS 服务器解析（解析特定域名的权威 DNS 服务器）</td></tr><tr><td>MX 记录</td><td>将域名指向邮件服务器地址（邮件路由）</td></tr><tr><td>SRV 记录</td><td>记录提供特定的服务的服务器（标识 VoIP(Voice over IP)服务、XMPP(Extensible Messaging and Presence Protocol)服务等）</td></tr><tr><td>TXT 记录</td><td>存储任意文本信息（域名验证、配置 SPF(Sender Policy Framework)、DKIM(DomainKeys Identified Mail)）</td></tr><tr><td>PTR 记录</td><td>用于反向 DNS 查找（将 IP 地址解析为域名，用于确定特定 IP 地址所对应的域名）</td></tr><tr><td>SOA 记录</td><td>指定域名的主要配置信息。包括域名的权威服务器、刷新时间、重试时间等。</td></tr></tbody></table><ol start="2"><li><p>域名需要备案吗？</p><p>不需要备案，因为 GitHub Pages 的服务器在国外。如果网站是部署在国内的服务器上（国内的服务器需要备案），可以在相应的云服务器厂商处进行备案。</p></li></ol>`,25)]))}const d=i(n,[["render",l],["__file","theme-reco-three.html.vue"]]),o=JSON.parse('{"path":"/frontend/vuepress/theme-reco-three.html","title":"VuePress + GitHub Pages 自定义域名","lang":"zh-CN","frontmatter":{"title":"VuePress + GitHub Pages 自定义域名","date":"2023-06-18T00:00:00.000Z","author":"Cleaner","categories":["前端"],"tags":["VuePress"],"description":"本文主要介绍为 VuePress + GitHub Pages + GitHub Actions 搭建的网站添加自定义域名的详细步骤。 前提：站点已经使用 VuePress + GitHub Pages + GibHub Actions 搭建并正常运行。 域名 申请 首先我们需要拥有一个域名，登录万网选择域名后进行购买，填写相关信息，并等待审核。审核通...","head":[["meta",{"property":"og:url","content":"https://cleaner.love/frontend/vuepress/theme-reco-three.html"}],["meta",{"property":"og:site_name","content":"Cleaner"}],["meta",{"property":"og:title","content":"VuePress + GitHub Pages 自定义域名"}],["meta",{"property":"og:description","content":"本文主要介绍为 VuePress + GitHub Pages + GitHub Actions 搭建的网站添加自定义域名的详细步骤。 前提：站点已经使用 VuePress + GitHub Pages + GibHub Actions 搭建并正常运行。 域名 申请 首先我们需要拥有一个域名，登录万网选择域名后进行购买，填写相关信息，并等待审核。审核通..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://s2.loli.net/2023/06/17/BzKhbJSynRd32Ev.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-25T07:30:06.000Z"}],["meta",{"property":"article:author","content":"Cleaner"}],["meta",{"property":"article:tag","content":"VuePress"}],["meta",{"property":"article:published_time","content":"2023-06-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-25T07:30:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"VuePress + GitHub Pages 自定义域名\\",\\"image\\":[\\"https://s2.loli.net/2023/06/17/BzKhbJSynRd32Ev.png\\",\\"https://s2.loli.net/2023/06/17/FZHrgbIC8wA4PqG.png\\",\\"https://s2.loli.net/2023/06/17/SdsHzFactYLOXpq.png\\",\\"https://s2.loli.net/2023/06/17/Fka16xMycBwVieg.png\\"],\\"datePublished\\":\\"2023-06-18T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-25T07:30:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cleaner\\"}]}"]]},"headers":[{"level":2,"title":"域名","slug":"域名","link":"#域名","children":[{"level":3,"title":"申请","slug":"申请","link":"#申请","children":[]},{"level":3,"title":"配置","slug":"配置","link":"#配置","children":[]}]},{"level":2,"title":"GitHub Pages 设置","slug":"github-pages-设置","link":"#github-pages-设置","children":[]},{"level":2,"title":"GitHub Actions 配置","slug":"github-actions-配置","link":"#github-actions-配置","children":[]},{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]}],"git":{"createdTime":1742887806000,"updatedTime":1742887806000,"contributors":[{"name":"Cleaner","username":"Cleaner","email":"1414984960@qq.com","commits":1,"url":"https://github.com/Cleaner"}]},"readingTime":{"minutes":3.56,"words":1068},"filePathRelative":"frontend/vuepress/theme-reco-three.md","localizedDate":"2023年6月18日","excerpt":"<blockquote>\\n<p>本文主要介绍为 VuePress + GitHub Pages + GitHub Actions 搭建的网站添加自定义域名的详细步骤。</p>\\n<p>前提：站点已经使用 VuePress + GitHub Pages + GibHub Actions 搭建并正常运行。</p>\\n</blockquote>","autoDesc":true}');export{d as comp,o as data};
